<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>小球的重力动画</title>
    <style>
        body{
            margin:0;
        }
        canvas{
            width:100%;
            height:100%;
            position:fixed;
            background:#BDF;
        }
    </style>
</head>
<body>
    <canvas></canvas>
    <script>
        let canvas = document.querySelector("canvas");
        let width = canvas.width = canvas.offsetWidth;
        let height = canvas.height = canvas.offsetHeight;
        let context = canvas.getContext("2d");

        let r = 50; //小球半径
        let x = 50; //圆心横坐标
        let y = 50; //圆心纵坐标
        let vx = 1; //默认横向速度
        let vy = 0; //默认纵向速度
        let gravity = 0.98; //重力加速度

        (function draw(){

            //清空画布、重新绘制
            context.clearRect(0,0,width,height);
            context.beginPath();

            vy += gravity;
            x += vx;
            y += vy;

            //碰到底部
            if(y >= height-r){
                y = height - r;

                vy *= -0.7; //纵向速度方向改变 损耗0.3
                vx -= 0.1; //横向速度减少

                if(vx<=0){
                    vx = 0;
                }
            }

            context.arc(x,y,50,0,Math.PI*2);
            context.fillStyle = "#DC6D4F";
            context.fill();
            requestAnimationFrame(draw);
        })();
    </script>
</body>
</html>